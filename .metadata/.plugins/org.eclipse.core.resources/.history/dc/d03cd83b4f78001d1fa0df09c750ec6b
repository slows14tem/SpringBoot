package edu.pnu.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;

import edu.pnu.domain.Member;
import edu.pnu.domain.Reply;
import edu.pnu.service.ReplyService;

@Controller
public class ReplyController {
	
	@Autowired
	private ReplyService replyService;
	
//	@GetMapping("/getBoard")
	//이런식으로 하면 get방식으로 같은 url을 부르는 두개의 method가 생성되서 오류날듯
//	public String getReplyList(Reply reply, Model model) {
//		Member member = (Member)model.asMap().get("member");
//		//세션 "member"
//		if(member == null||member.getId()==null) {
//			return "redirect:login";
//		}
//		model.addAttribute("replyList", replyService.getReplyList(reply));
//		return "getBoard";
//	}
	
	@PostMapping("insertReply")
	public String insertReply(@ModelAttribute("member") Member member, Reply reply) {
		if(member.getId()==null) {
			return "redirect:login";
		}
		replyService.insertReply(reply);
		return "redirect:getBoard";
	}
	
	@PostMapping("/updateReply")
	public String updateReply(@ModelAttribute("member") Member member, Reply reply) {
		if(member.getId()==null) {
			return "redirect:login";
		}
		replyService.updateReply(reply);
		return "redirect:getBoard";
	}
	
	@DeleteMapping("deleteReply")
	public String deleteReply(@ModelAttribute("member") Member member, Reply reply) {
		if(member.getId()==null) {
			return "redirect:login";
		}
		replyService.deleteReply(reply);
		return "redirect:getBoard";
	}
}
