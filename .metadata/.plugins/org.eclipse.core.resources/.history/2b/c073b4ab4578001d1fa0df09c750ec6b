package edu.pnu.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

import edu.pnu.domain.Member;
import edu.pnu.domain.Reply;
import edu.pnu.service.ReplyService;

@Controller
public class ReplyController {
	
	@Autowired
	private ReplyService replyService;
	
	@GetMapping("/getBoard")
	//이런식으로 하면 get방식으로 같은 url을 부르는 두개의 method가 생성되서 오류날듯
	public String getReplyList(Reply reply, Model model) {
		Member member = (Member)model.asMap().get("member");
		//세션 "member"
		if(member == null||member.getId()==null) {
			return "redirect:login";
		}
		model.addAttribute("replyList", replyService.getReplyList(reply));
		return "getBoard";
	}

}
