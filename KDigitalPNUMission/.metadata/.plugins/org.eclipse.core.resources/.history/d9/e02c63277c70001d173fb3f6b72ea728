package edu.pnu.service;

import java.util.Date;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import edu.pnu.domain.Members;
import edu.pnu.repository.MemberRepository;

@Service
public class MemberService {
	
	
	private MemberRepository memRepo;
	
	@Autowired
	public MemberService(MemberRepository memRepo) {
		this.memRepo = memRepo;
	}

	public List<Members> getMembers(){
		List<Members> list = memRepo.findAll();
		return list;
	}

	public Members getMember(String id) {
		try {
			Members m = memRepo.findById(id).get();
			return m;
		} catch(Exception e) {
			System.out.println("해당하는 id가 없습니다.");
			return null;
		}
		
	}

	public Members addMember(Members member) {
		Members m = memRepo.save(new Members(
				member.getId(),
				member.getPass(),
				member.getName(),
				new Date()
				));
		return m;

	}

	public Members updateMember(Members member) {
		Members m = memRepo.findById(member.getId()).get();
		m.setPass("1234Cc");
		m.setName("NameCh");
		m.setRegidate(new Date());
		memRepo.save(m);
		return m;
	}

	public Members deleteMember(String id) {
		Members m = memRepo.findById(id).get();
		memRepo.deleteById(id);
		return m;
	}

}
